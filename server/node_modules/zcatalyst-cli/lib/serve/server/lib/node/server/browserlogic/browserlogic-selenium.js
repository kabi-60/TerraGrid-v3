/**
 * @author eraianbu-5628
 * 
 */

"use strict"

import SELENIUM_HANDLER from './utils/selenium-handler.js';

import { createRequire } from 'module';
const require = createRequire(import.meta.url);

const webdriver = require('selenium-webdriver');
const chrome = require('selenium-webdriver/chrome');

export default (REQUEST, RESPONSE) => {
    return Promise.resolve([REQUEST, RESPONSE]);
}

export const constructFunctionParameters = async (REQUEST, RESPONSE) => {
    const seleniumDriver = await SELENIUM_HANDLER.getBrowser();
    let options = new chrome.Options();
    let driver = new webdriver.Builder()
        .forBrowser('chrome')
        .withCapabilities({
            browserName: 'chrome',
            'goog:chromeOptions': {
              debuggerAddress: '127.0.0.1:9002'
            }
          })
        .build();

    await driver.switchTo().newWindow('window');
    return [REQUEST, RESPONSE, driver];
};

export const close = async (REQUEST, RESPONSE, driver) => {
    try {
        driver.quit();
    }
    catch (ERROR) {
        console.error(ERROR);
    }
};
