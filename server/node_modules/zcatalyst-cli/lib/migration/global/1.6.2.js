"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.migrate = exports.isRequire = void 0;
const ansi_colors_1 = require("ansi-colors");
const config_store_1 = __importDefault(require("../../config-store"));
const constants_1 = require("../../util_modules/constants");
const logger_1 = require("../../util_modules/logger");
const isRequire = () => {
    return config_store_1.default.has('active_dc') || config_store_1.default.has(constants_1.DEFAULT.dc);
};
exports.isRequire = isRequire;
const migrate = () => {
    const activeDc = config_store_1.default.get('active_dc', constants_1.DEFAULT.dc);
    const usage = config_store_1.default.get(`${activeDc}.usage`, false);
    config_store_1.default.set('usage', usage);
    if (config_store_1.default.has(constants_1.DC_TYPE.us.value)) {
        config_store_1.default.delete(constants_1.DC_TYPE.us.value + '.usage');
    }
    if (config_store_1.default.has(constants_1.DC_TYPE.eu.value)) {
        config_store_1.default.delete(constants_1.DC_TYPE.eu.value + '.usage');
    }
    (0, logger_1.info)();
    (0, logger_1.info)(ansi_colors_1.bold.cyan('Note: ') +
        'The usage statistics collection will be done based on the consent provided with the login.');
    (0, logger_1.info)();
};
exports.migrate = migrate;
